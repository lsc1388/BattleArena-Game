# 滑鼠準心系統 - Mouse Crosshair System

## 功能概覽 (Features Overview)

BattleArena 遊戲已成功整合了高精度的滑鼠準心系統，提供直觀的瞄準體驗。

## 主要特色 (Key Features)

### 🎯 精確瞄準 (Precise Aiming)

- **十字準心設計**：中央帶有空隙的十字準心，便於精確瞄準
- **中央瞄準點**：準心中央有一個小點，標示精確的瞄準位置
- **實時追蹤**：準心實時跟隨滑鼠位置移動

### 🌈 智能變色系統 (Smart Color System)

準心會根據玩家狀態自動變色，提供即時的視覺回饋：

- **🟢 白色 (White)**：正常狀態，子彈充足
- **🟡 黃色 (Yellow)**：正在重裝彈藥
- **🟠 橘色 (Orange)**：子彈不足（剩餘 < 25%）
- **🔴 紅色 (Red)**：沒有子彈

### ⚙️ 可自訂設定 (Customizable Settings)

在 `src/ui/game_ui.py` 中可調整以下參數：

```python
# 準心系統設定
self.crosshair_enabled = True      # 是否啟用準心
self.crosshair_size = 15           # 準心大小
self.crosshair_thickness = 2       # 線條粗細
self.crosshair_gap = 5             # 中央空隙大小
```

## 操作方式 (Controls)

### 🖱️ 滑鼠控制 (Mouse Controls)

- **移動滑鼠**：移動準心位置
- **左鍵點擊**：向準心位置發射子彈
- **右鍵點擊**：（可擴展為特殊功能）

### ⌨️ 快捷鍵 (Keyboard Shortcuts)

- **C 鍵**：切換準心顯示開關
  - 按下 C 鍵可以開啟/關閉準心顯示
  - 遊戲會顯示「準心已開啟」或「準心已關閉」的提示訊息

## 技術實現 (Technical Implementation)

### 架構設計 (Architecture)

- **模組化設計**：準心系統完全整合在 `GameUI` 類別中
- **狀態驅動**：準心顏色基於玩家武器狀態動態變化
- **性能優化**：使用 pygame 原生繪圖函數，確保流暢渲染

### 核心方法 (Core Methods)

#### `_draw_crosshair(screen, player)`

主要的準心繪製方法：

- 檢查準心是否啟用
- 獲取滑鼠位置
- 根據玩家狀態決定顏色
- 繪製十字準心和中央瞄準點

#### `_get_crosshair_color(player)`

智能顏色決定方法：

- 分析玩家當前武器的子彈狀態
- 檢查是否正在重裝彈
- 根據預設規則回傳對應顏色

## 擴展建議 (Extension Ideas)

### 🎨 視覺增強 (Visual Enhancements)

- **動畫效果**：準心可加入脈動或呼吸動畫
- **命中指示**：命中目標時的視覺回饋
- **準心樣式**：支援多種準心樣式（圓形、方形等）

### 🎮 遊戲機制 (Gameplay Mechanics)

- **精準度指示**：根據武器類型調整準心大小
- **後座力模擬**：射擊後準心輕微偏移
- **距離指示**：遠距離目標時準心變化

### ⚡ 性能優化 (Performance Optimization)

- **準心快取**：預先繪製準心圖形
- **條件渲染**：只在需要時更新準心
- **批次處理**：與其他 UI 元素一起渲染

## 測試驗證 (Testing Verification)

✅ **基本功能測試**

- 準心正常顯示和跟隨滑鼠
- 滑鼠點擊精確瞄準射擊
- C 鍵切換準心開關

✅ **狀態變色測試**

- 子彈充足時顯示白色
- 子彈不足時顯示橘色
- 沒有子彈時顯示紅色
- 重裝彈時顯示黃色

✅ **相容性測試**

- 與現有遊戲系統完美整合
- 不影響其他 UI 元素顯示
- 支援中文字體和訊息系統

## 程式碼風格 (Code Style)

本系統遵循專案的中文程式碼風格指南：

- 使用繁體中文註解
- 詳細的文檔字串說明
- Snake_case 命名規則
- 模組化設計原則

---

## 使用範例 (Usage Example)

1. **啟動遊戲**：`python main.py`
2. **選擇角色和場景**：進入遊戲
3. **觀察準心**：移動滑鼠看到白色十字準心
4. **測試瞄準**：點擊滑鼠左鍵向準心位置射擊
5. **切換準心**：按 C 鍵開關準心顯示
6. **觀察變色**：射擊消耗子彈後觀察準心顏色變化

準心系統讓 BattleArena 的射擊體驗更加精確和直觀！🎯
